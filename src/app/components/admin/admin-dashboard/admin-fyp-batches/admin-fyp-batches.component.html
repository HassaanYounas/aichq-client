<div class="text-dark">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center my-3">
            <h3 class="font-weight-bold">FYP Batches</h3>
        </div>
        <div class="grey-container p-4 mb-4">
            <h5 class="font-weight-bold mb-3">Add New FYP Batch</h5>
            <form id="addBatchForm" [formGroup]="addBatchForm" (ngSubmit)="onAddBatchFormSubmit(addBatchForm.value)">
                <div class="row mb-2">
                    <div class="col pr-1">
                        <select formControlName="Program" class="form-control-dropdown">
                            <option selected>Program</option>
                            <option *ngFor="let program of programs">{{ program.Title }}</option>
                        </select>
                    </div>
                    <div class="col pr-1">
                        <select formControlName="Session" class="form-control-dropdown">
                            <option selected>Session</option>
                            <option>Fall</option>
                            <option>Spring</option>
                        </select>
                    </div>
                    <div class="col">
                        <select formControlName="Year" class="form-control-dropdown">
                            <option selected>Year</option>
                            <option *ngFor="let year of years">{{ year }}</option>
                        </select>
                    </div>
                </div>
                <div class="text-danger" [ngClass]="{'d-none': validAddBatch}">Please select all options.</div>
            </form>
            <button form="addBatchForm" type="submit" class="btn btn-dashboard mt-2">Add</button>
            <div class="mt-2" [ngClass]="(addBatchMessage === 'Batch added successfully.')?'text-success':'text-danger'" [innerHTML]="addBatchMessage"></div>
        </div>
        <div class="grey-container p-4 mb-5">
            <h5 class="font-weight-bold mb-4">List of FYP Batches</h5>
            <h6 class="font-weight-bold mb-3">Filter Options</h6>
            <form [formGroup]="batchFilterSelectForm">
                <div class="row mb-3">
                    <div class="col">
                        <select formControlName="Program" #onProgramFilterSelect class="form-control-dropdown" (change)="onProgramFilterSelection(onProgramFilterSelect.value)">
                            <option selected>All Programs</option>
                            <option *ngFor="let program of programs">{{ program.Title }}</option>
                        </select>
                    </div>
                </div>
            </form>
            <div style="height: 20em; overflow-x: hidden; overflow-y: scroll;">
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th scope="col">Department</th>
                                <th scope="col">
                                    Program
                                    <i class="pointer" (click)="sortByProgram()">&nbsp;&#8597;</i>
                                </th>
                                <th scope="col">
                                    Session
                                    <i class="pointer" (click)="sortBySession()">&nbsp;&#8597;</i>
                                </th>
                                <th scope="col">
                                    Year<i class="pointer" (click)="sortByYear()">&nbsp;&#8597;</i>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let batch of batches">
                                <ng-container *ngIf="noFilterBoolean">
                                    <td>{{ batch.Department }}</td>
                                    <td>{{ batch.Program }}</td>
                                    <td>{{ batch.Session }}</td>
                                    <td>{{ batch.Year }}</td>
                                </ng-container>
                                <ng-container *ngIf="programFilterBoolean && batch.Program === selectedProgram">
                                    <td>{{ batch.Department }}</td>
                                    <td>{{ batch.Program }}</td>
                                    <td>{{ batch.Session }}</td>
                                    <td>{{ batch.Year }}</td>
                                </ng-container>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color ="#fff" type="ball-fussion" [fullScreen]="true">
        <p class="mt-5" style="color:white;">Working on it!</p>
    </ngx-spinner>
</div>